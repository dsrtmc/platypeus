import "./globals.css";
import { ReactNode } from "react";
import { ApolloWrapper } from "@/lib/apollo-provider";
import { ContentWrapper } from "@/components/ContentWrapper";
import { Header } from "@/components/header/Header";
import { ConfigLoader } from "@/app/ConfigLoader";
import { availableFonts } from "@/shared/constants/fonts";
import { ErrorProvider } from "@/app/ErrorProvider";
import { ErrorToast } from "@/app/ErrorToast";
import { NotificationProvider } from "@/app/NotificationProvider";
import { NotificationToast } from "@/app/NotificationToast";

export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html
      lang="en"
      className={`${Object.entries(availableFonts)
        .map(([name, font]) => font.variable)
        .join(" ")}`}
    >
      <body>
        <ApolloWrapper>
          {/* TODO: i guess make one <Providers> if that's a real thing? idk */}
          <ErrorProvider>
            <NotificationProvider>
              <ContentWrapper>
                <Header />
                <ConfigLoader />
                {children}
                <ErrorToast />
                <NotificationToast />
              </ContentWrapper>
            </NotificationProvider>
          </ErrorProvider>
        </ApolloWrapper>
      </body>
    </html>
  );
}
